# VoiceHelper AI - Docker Compose éƒ¨ç½²æŒ‡å—

> ğŸš€ **ä¸€é”®å¯åŠ¨å®Œæ•´çš„å¤šæ¨¡æ€AIåŠ©æ‰‹å¹³å°**

## å¿«é€Ÿå¼€å§‹

### ğŸ¯ ä¸€é”®å¯åŠ¨
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd voicehelper

# ä¸€é”®å¯åŠ¨
./quick-start.sh
```

### ğŸ”§ æ‰‹åŠ¨å¯åŠ¨
```bash
# 1. å¤åˆ¶ç¯å¢ƒé…ç½®
cp env.unified .env

# 2. å¯åŠ¨æœåŠ¡
./deploy.sh -e dev up -d

# 3. è®¿é—®åº”ç”¨
open http://localhost:3000
```

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **Docker**: 20.10+
- **Docker Compose**: 2.0+
- **å†…å­˜**: 4GB+ å¯ç”¨å†…å­˜
- **å­˜å‚¨**: 10GB+ å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: äº’è”ç½‘è¿æ¥

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VoiceHelper AI                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ å‰ç«¯å±‚                                                   â”‚
â”‚  â”œâ”€â”€ Next.js Web App (3000)                               â”‚
â”‚  â”œâ”€â”€ Developer Portal (3002)                              â”‚
â”‚  â””â”€â”€ Admin Panel (5001)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸšª ç½‘å…³å±‚                                                   â”‚
â”‚  â”œâ”€â”€ Go API Gateway (8080)                                â”‚
â”‚  â””â”€â”€ Nginx/HAProxy (80/443)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¤– AI æœåŠ¡å±‚                                                â”‚
â”‚  â”œâ”€â”€ Algorithm Service (8000)                             â”‚
â”‚  â””â”€â”€ Voice Service (8001)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ—„ï¸ æ•°æ®å±‚                                                   â”‚
â”‚  â”œâ”€â”€ PostgreSQL (5432)                                    â”‚
â”‚  â”œâ”€â”€ Redis (6379)                                         â”‚
â”‚  â”œâ”€â”€ Milvus Vector DB (19530)                             â”‚
â”‚  â”œâ”€â”€ Neo4j Graph DB (7474/7687)                           â”‚
â”‚  â””â”€â”€ NATS Message Queue (4222)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š ç›‘æ§å±‚                                                   â”‚
â”‚  â”œâ”€â”€ Grafana (3004)                                       â”‚
â”‚  â”œâ”€â”€ Prometheus (9090)                                    â”‚
â”‚  â””â”€â”€ Jaeger (16686)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ® éƒ¨ç½²æ¨¡å¼

### å¼€å‘æ¨¡å¼
```bash
./deploy.sh -e dev up -d
# æˆ–
make dev
```
- âœ… çƒ­é‡è½½æ”¯æŒ
- âœ… è¯¦ç»†æ—¥å¿—è¾“å‡º
- âœ… å¼€å‘å·¥å…·é›†æˆ

### ç”Ÿäº§æ¨¡å¼
```bash
./deploy.sh -e prod up -d
# æˆ–
make prod
```
- âœ… æ€§èƒ½ä¼˜åŒ–
- âœ… å¤šå‰¯æœ¬éƒ¨ç½²
- âœ… å®‰å…¨åŠ å›º

### æœ¬åœ°æ¨¡å¼
```bash
./deploy.sh -e local up -d
# æˆ–
make local
```
- âœ… å¿«é€Ÿå¯åŠ¨
- âœ… ç®€åŒ–é…ç½®

## ğŸ”§ ç®¡ç†å‘½ä»¤

### åŸºç¡€æ“ä½œ
```bash
# æŸ¥çœ‹çŠ¶æ€
./deploy.sh status

# æŸ¥çœ‹æ—¥å¿—
./deploy.sh logs

# å¥åº·æ£€æŸ¥
./deploy.sh health

# é‡å¯æœåŠ¡
./deploy.sh restart

# åœæ­¢æœåŠ¡
./deploy.sh down
```

### æ•°æ®ç®¡ç†
```bash
# å¤‡ä»½æ•°æ®
./deploy.sh backup

# æ¢å¤æ•°æ®
./deploy.sh restore /path/to/backup

# æ¸…ç†èµ„æº
./deploy.sh -f clean
```

### æ‰©ç¼©å®¹
```bash
# æ‰©å®¹ç®—æ³•æœåŠ¡
./deploy.sh scale algo-service=3

# æ‰©å®¹ç½‘å…³æœåŠ¡
./deploy.sh scale gateway=2
```

## ğŸŒ è®¿é—®åœ°å€

### ä¸»è¦åº”ç”¨
- **Web åº”ç”¨**: http://localhost:3000
- **API ç½‘å…³**: http://localhost:8080
- **ç®—æ³•æœåŠ¡**: http://localhost:8000
- **ç®¡ç†åå°**: http://localhost:5001

### ç®¡ç†å·¥å…·
- **Grafana**: http://localhost:3004 (admin/admin123)
- **Prometheus**: http://localhost:9090
- **pgAdmin**: http://localhost:5050
- **Redis ç®¡ç†**: http://localhost:8081

## ğŸ”‘ é…ç½®è¯´æ˜

### API å¯†é’¥é…ç½®
ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š
```bash
# AI æ¨¡å‹ API å¯†é’¥
ARK_API_KEY=your-ark-api-key-here      # è±†åŒ…å¤§æ¨¡å‹
GLM_API_KEY=your-glm-api-key-here      # GLM-4

# è¯­éŸ³æœåŠ¡
AZURE_SPEECH_KEY=your-azure-speech-key-here
```

### è·å– API å¯†é’¥
- **è±†åŒ… API**: https://console.volcengine.com/
- **GLM-4 API**: https://open.bigmodel.cn/
- **Azure è¯­éŸ³**: https://portal.azure.com/

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### ç«¯å£å†²çª
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :3000

# åœæ­¢å†²çªæœåŠ¡æˆ–ä¿®æ”¹ç«¯å£
```

#### å†…å­˜ä¸è¶³
```bash
# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h

# æ¸…ç† Docker èµ„æº
docker system prune -f
```

#### æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
./deploy.sh logs -s <service-name>

# æ£€æŸ¥é…ç½®
./test-config.sh
```

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
./deploy.sh logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡
./deploy.sh -s gateway logs

# å®æ—¶è·Ÿè¸ª
./deploy.sh logs -f
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### èµ„æºé…ç½®
- **æœ€ä½**: 4æ ¸/8GB/20GB
- **æ¨è**: 8æ ¸/16GB/50GB
- **ç”Ÿäº§**: 16æ ¸/32GB/100GB

### æ‰©å®¹ç­–ç•¥
```bash
# æ°´å¹³æ‰©å®¹
./deploy.sh scale gateway=3
./deploy.sh scale algo-service=2

# å‚ç›´æ‰©å®¹ï¼ˆä¿®æ”¹é…ç½®æ–‡ä»¶ï¼‰
```

## ğŸ”’ å®‰å…¨é…ç½®

### ç”Ÿäº§ç¯å¢ƒå»ºè®®
1. ä¿®æ”¹é»˜è®¤å¯†ç 
2. å¯ç”¨ HTTPS
3. é…ç½®é˜²ç«å¢™
4. å®šæœŸæ›´æ–°é•œåƒ
5. ç›‘æ§å¼‚å¸¸è®¿é—®

## ğŸ“ æ›´æ–°ç»´æŠ¤

### ç‰ˆæœ¬æ›´æ–°
```bash
# 1. å¤‡ä»½æ•°æ®
./deploy.sh backup

# 2. æ‹‰å–æ›´æ–°
git pull origin main

# 3. é‡æ–°éƒ¨ç½²
./deploy.sh restart
```

### å®šæœŸç»´æŠ¤
- **æ¯å‘¨**: å¤‡ä»½æ•°æ®ã€æ¸…ç†æ—¥å¿—
- **æ¯æœˆ**: æ›´æ–°é•œåƒã€å®‰å…¨æ£€æŸ¥
- **æ¯å­£åº¦**: æ€§èƒ½è¯„ä¼°ã€å®¹é‡è§„åˆ’

## ğŸ“š æ–‡æ¡£ç´¢å¼•

- **[å®Œæ•´éƒ¨ç½²æŒ‡å—](./DEPLOYMENT.md)** - è¯¦ç»†çš„éƒ¨ç½²è¯´æ˜
- **[éƒ¨ç½²æ–¹æ¡ˆæ€»ç»“](./DEPLOYMENT_SUMMARY.md)** - å®Œæ•´åŠŸèƒ½æ€»ç»“
- **[å¼€å‘çŠ¶æ€æ–‡æ¡£](./docs/dev-state.md)** - é¡¹ç›®çŠ¶æ€æ¦‚è§ˆ
- **[API ä½¿ç”¨æŒ‡å—](./docs/API_GUIDE.md)** - API æ¥å£æ–‡æ¡£

## ğŸ› ï¸ å¼€å‘å·¥å…·

### é…ç½®éªŒè¯
```bash
# éªŒè¯é…ç½®æ–‡ä»¶
./test-config.sh

# ç¯å¢ƒæ£€æŸ¥
./deploy.sh check
```

### ä»£ç è´¨é‡
```bash
# ä»£ç æ£€æŸ¥
make lint

# ä»£ç æ ¼å¼åŒ–
make format

# è¿è¡Œæµ‹è¯•
make test
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
- **é¡¹ç›®æ–‡æ¡£**: [docs/](./docs/)
- **é—®é¢˜åé¦ˆ**: GitHub Issues
- **æŠ€æœ¯è®¨è®º**: GitHub Discussions

### è”ç³»æ–¹å¼
- **é‚®ç®±**: support@voicehelper.ai
- **å®˜ç½‘**: https://voicehelper.ai

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

```bash
# ä¸€é”®å¯åŠ¨
./quick-start.sh

# è®¿é—®åº”ç”¨
open http://localhost:3000
```

**äº«å—æ‚¨çš„ VoiceHelper AI ä¹‹æ—…ï¼** ğŸš€
