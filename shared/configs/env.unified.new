# ================================
# VoiceHelper AI - 统一环境配置文件
# 所有服务共享此配置文件
# ================================

# ================================
# 🚀 基础环境配置
# ================================
ENV=development
NODE_ENV=development
FLASK_ENV=development
GIN_MODE=debug

# 服务名称配置
SERVICE_NAME=voicehelper
GATEWAY_SERVICE_NAME=voicehelper-gateway
ALGO_SERVICE_NAME=voicehelper-algo
VOICE_SERVICE_NAME=voicehelper-voice
FRONTEND_SERVICE_NAME=voicehelper-frontend
ADMIN_SERVICE_NAME=voicehelper-admin

# ================================
# 🌐 服务端口配置
# ================================
# 主要服务端口
PORT=8000
GATEWAY_PORT=8080
ALGO_PORT=8000
VOICE_PORT=8001
FRONTEND_PORT=3000
PORTAL_PORT=3002
ADMIN_PORT=5001

# 数据库端口
POSTGRES_PORT=5432
REDIS_PORT=6379
NEO4J_HTTP_PORT=7474
NEO4J_BOLT_PORT=7687

# 监控服务端口
PROMETHEUS_PORT=9090
GRAFANA_PORT=3004
PGADMIN_PORT=5050
REDIS_COMMANDER_PORT=8081
MAILHOG_SMTP_PORT=1025
MAILHOG_WEB_PORT=8025

# ================================
# 🗄️ 数据库配置
# ================================
# PostgreSQL 配置
POSTGRES_HOST=postgres
POSTGRES_DB=voicehelper
POSTGRES_USER=voicehelper
POSTGRES_PASSWORD=voicehelper123
DATABASE_URL=postgresql://voicehelper:voicehelper123@postgres:5432/voicehelper

# Redis 配置
REDIS_HOST=redis
REDIS_PASSWORD=redis123
REDIS_URL=redis://:redis123@redis:6379/0

# Neo4j 配置 (图数据库)
NEO4J_URI=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4j123

# ================================
# 🤖 AI 模型配置
# ================================
# 主要使用的模型
PRIMARY_MODEL=glm-4-flash

# GLM-4 (智谱AI) - 🥇 推荐首选，成本最低
# 获取方式: https://open.bigmodel.cn/
# 成本: 0.1元/百万tokens (最便宜，已配置可用)
GLM_API_KEY=fc37bd957e5c4e669c748219881161b2.vnvJq6vsQIKZaNS9
GLM_BASE_URL=https://open.bigmodel.cn/api/paas/v4

# 豆包大模型 (字节跳动) - 🥈 备选方案
# 获取方式: https://console.volcengine.com/
# 成本: 2.8元/百万tokens (性价比较好)
ARK_API_KEY=1a208824-2b22-4a7f-ac89-49c4b1dcc5a7
ARK_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
ARK_MODEL=doubao-pro-4k

# 通义千问 (阿里云) - 企业级选择
QWEN_API_KEY=your-qwen-api-key-here
QWEN_BASE_URL=https://dashscope.aliyuncs.com/api/v1

# 文心一言 (百度) - 中文优化
ERNIE_API_KEY=your-ernie-access-token-here
ERNIE_BASE_URL=https://aip.baidubce.com/rpc/2.0/ai_custom/v1

# 混元 (腾讯云) - 腾讯生态
HUNYUAN_API_KEY=your-hunyuan-api-key-here
HUNYUAN_BASE_URL=https://hunyuan.tencentcloudapi.com

# OpenAI API (备用/对比)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_BASE_URL=https://api.openai.com/v1

# ================================
# 🎤 语音服务配置
# ================================
# Azure Speech Services
AZURE_SPEECH_KEY=your-azure-speech-key-here
AZURE_SPEECH_REGION=eastus

# 语音服务配置
ENABLE_VOICE_PROCESSING=true
VOICE_CHUNK_SIZE=1024
VOICE_SAMPLE_RATE=16000

# ================================
# 🔍 Embedding 配置
# ================================
EMBEDDING_MODEL=bge-m3
EMBEDDING_DIMENSION=1024
STORAGE_PATH=/app/data

# RAG 配置
DEFAULT_CHUNK_SIZE=600
DEFAULT_CHUNK_OVERLAP=80
DEFAULT_TOP_K=5
DEFAULT_SIMILARITY_THRESHOLD=0.3

# ================================
# 🔐 安全配置
# ================================
# JWT 配置
JWT_SECRET=your-jwt-secret-key-change-in-production-environment
JWT_ALGORITHM=HS256
JWT_EXPIRE_HOURS=24
JWT_EXPIRES_IN=24h

# 管理员配置
ADMIN_SECRET_KEY=b29d40c1ea82b3331a76b7479526e67fcbf7e5d09719ddf8e6c607dae81756fa

# CORS 配置
CORS_ORIGINS=http://localhost:3000,http://localhost:3002,http://localhost:5001

# ================================
# 🚀 应用配置
# ================================
# 主机配置
HOST=0.0.0.0
HOSTNAME=0.0.0.0

# 前端配置
NEXT_PUBLIC_API_URL=http://localhost:8080
NEXT_PUBLIC_WS_URL=ws://localhost:8080
NEXT_PUBLIC_VOICE_WS_URL=ws://localhost:8001
NEXT_PUBLIC_APP_NAME=VoiceHelper AI
NEXT_PUBLIC_APP_VERSION=1.9.0

# 内部服务发现 (容器间通信)
ALGO_SERVICE_URL=http://algo-service:8000
VOICE_SERVICE_URL=http://voice-service:8001
FRONTEND_SERVICE_URL=http://frontend:3000
ADMIN_SERVICE_URL=http://admin:5001

# ================================
# 🎛️ 功能开关
# ================================
ENABLE_VOICE_PROCESSING=true
ENABLE_MULTIMODAL=true
ENABLE_GRAPH_RAG=true
ENABLE_AGENT_REASONING=true

# ================================
# 📊 日志配置
# ================================
LOG_LEVEL=info

# ================================
# 🐍 Python 运行时配置
# ================================
PYTHONPATH=/app
PYTHONUNBUFFERED=1

# ================================
# 🔧 Go 运行时配置
# ================================
# 在开发环境使用 debug 模式
# 在生产环境会被覆盖为 release

# ================================
# 📦 Node.js 运行时配置
# ================================
# Next.js 配置会自动读取 NODE_ENV

# ================================
# 🐳 Docker 配置
# ================================
# 容器内部网络配置
DOCKER_NETWORK=voicehelper-network

# ================================
# 📈 监控配置
# ================================
# Prometheus 配置
PROMETHEUS_RETENTION_TIME=200h

# Grafana 配置
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin123
GF_USERS_ALLOW_SIGN_UP=false

# pgAdmin 配置
PGADMIN_DEFAULT_EMAIL=admin@voicehelper.ai
PGADMIN_DEFAULT_PASSWORD=admin123
PGADMIN_CONFIG_SERVER_MODE=False

# ================================
# 🧪 开发工具配置
# ================================
# Mailhog (邮件测试)
MAILHOG_SMTP_HOST=mailhog
MAILHOG_SMTP_PORT=1025

# ================================
# 💡 使用说明
# ================================
# 1. 复制此文件为 .env: cp env.unified.new .env
# 2. 根据需要修改配置值
# 3. 生产环境请务必修改所有密码和密钥
# 4. 获取 API 密钥:
#    - GLM-4: https://open.bigmodel.cn/ (已配置，推荐)
#    - 豆包: https://console.volcengine.com/ (备用)
#    - OpenAI: https://platform.openai.com/ (可选)
# 5. 启动服务: docker-compose -f docker-compose.local.yml up -d

# ================================
# 📊 成本对比 (每百万tokens)
# ================================
# GLM-4 Flash:     0.1元  (最便宜) 🥇 推荐
# 豆包 Lite:       0.9元  (性价比高)
# 豆包 Pro:        2.8元  (备选)
# 文心 Lite:       2.8元
# 混元 Lite:       3元
# 通义千问 Turbo:  8元
# OpenAI GPT-4:    ~200元 (对比)
