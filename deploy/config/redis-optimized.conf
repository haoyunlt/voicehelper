# Redis 性能优化配置
# 基于性能测试结果的优化方案

# 内存管理
maxmemory 1gb
maxmemory-policy allkeys-lru
maxmemory-samples 5

# 持久化优化 (开发环境可禁用以节省内存)
save ""
# save 900 1
# save 300 10
# save 60 10000

# 网络优化
tcp-keepalive 60
tcp-backlog 511
timeout 300

# 客户端连接优化
maxclients 1000

# 内存优化
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
list-max-ziplist-size -2
list-compress-depth 0
set-max-intset-entries 512
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

# 性能优化
lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
lazyfree-lazy-server-del yes

# 日志配置
loglevel notice
logfile ""

# 其他优化
stop-writes-on-bgsave-error no
rdbcompression yes
rdbchecksum yes
